from ot2_utils import OT2Manager
import random

rows = "CDEFGH" # from 2nd row

def random_recipes() -> tuple[float, float, float]:
    a = random.uniform(0.1, 0.8)
    b = random.uniform(0.1, 1 - a - 0.1)
    c = 1 - a - b
    return a*200, b*200, c*200

def generate_color_space_recipes() -> list[list[tuple[float, float, float]]]:
    wells = [[random_recipes() for _ in range(12)] for _ in range(8)]
    return wells

# color_space: list[list[tuple[float, float, float]]] = generate_color_space_recipes()
# print(color_space)

color_space = [[(25.90544986883835, 129.13445009208647, 44.9601000390752), (135.62271529384694, 23.66347401841028, 40.71381068774279), (76.5679936532982, 52.8348112125598, 70.597195134142), (61.348823210932046, 46.81324594805596, 91.837930841012), (108.47142357303366, 32.2119103372421, 59.31666608972424), (104.55968412697705, 58.57326815865246, 36.86704771437049), (90.94695659012424, 34.80596388814598, 74.24707952172977), (44.24374346900896, 97.63874058677138, 58.117515944219655), (88.27536499790463, 73.15521016853172, 38.569424833563644), (157.22080581703815, 20.711114198749524, 22.068079984212307), (97.7436594508589, 44.05354711688035, 58.20279343226075), (88.66299960168939, 21.055398253171585, 90.28160214513902)], [(95.9283958763597, 26.90117453126784, 77.17042959237246), (120.79861705538126, 35.9815421587935, 43.219840785825234), (108.08477705184194, 54.70434746123119, 37.210875486926874), (96.20644645372063, 24.37456729428367, 79.4189862519957), (98.56364425795687, 47.840957281657104, 53.59539846038602), (21.107518931143442, 108.47483579342887, 70.41764527542769), (39.379226059522196, 37.835088371873816, 122.78568556860398), (127.4222654808108, 41.91465353987313, 30.66308097931608), (49.6000155858544, 89.52829030158918, 60.87169411255642), (122.05218998948529, 56.760277755610474, 21.18753225490424), (83.99309041280878, 62.285896037205625, 53.7210135499856), (61.67913500381215, 101.77428464033017, 36.54658035585769)], [(143.51207504720676, 30.28475737037402, 26.203167582419223), (33.8597033362075, 134.65266065942828, 31.48763600436424), (77.53759850057796, 67.09687349194877, 55.36552800747327), (64.3996879100309, 35.89720668824189, 99.70310540172721), (58.60064202649602, 80.84819172205411, 60.55116625144987), (111.43257137031868, 61.82890309525541, 26.738525534425904), (36.71653615593679, 83.78200325388474, 79.50146059017848), (83.09806359695102, 90.34665197091675, 26.55528443213222), (60.267311907220524, 80.99452943913965, 58.73815865363983), (97.9776906675675, 76.80112862279549, 25.221180709637014), (71.57731785724664, 94.99751345253962, 33.425168690213745), (50.416831907303816, 63.5590775747708, 86.02409051792539)], [(100.0927929760478, 77.38292974866177, 22.524277275290427), (156.90004898015627, 22.560703778925138, 20.53924724091858), (47.612255659849986, 21.106677483430943, 131.28106685671906), (157.0924361863248, 21.367421739223673, 21.540142074451524), (148.98370721889495, 27.669644235031065, 23.34664854607398), (133.31360921637986, 39.249946707338346, 27.43644407628181), (33.40242745480144, 133.6551867618818, 32.942385783316766), (105.23928274048893, 37.0366993331657, 57.724017926345375), (72.38495017505204, 66.73515720673369, 60.87989261821427), (88.47798118178778, 51.68475632752105, 59.83726249069117), (120.60368408752069, 43.7022043080045, 35.69411160447481), (118.60175884755692, 33.88224478416018, 47.51599636828289)], [(36.90235804282614, 79.99976267562887, 83.09787928154499), (95.4381875998098, 59.097301654654544, 45.464510745535655), (102.09101447629736, 31.726214762314275, 66.18277076138837), (60.81855363947478, 65.31767620254055, 73.86377015798466), (25.21619492066508, 35.672334347757406, 139.11147073157753), (54.66308469349311, 86.66589487355378, 58.671020432953114), (130.97479195220714, 36.05470147657815, 32.970506571214706), (42.61438863574121, 118.8928384331168, 38.49277293114199), (53.12336571614793, 34.45899242726262, 112.41764185658944), (155.84345519610957, 23.771036808011477, 20.38550799587894), (139.95032514107874, 28.81216285931459, 31.23751199960669), (99.840279027333, 79.5581840766941, 20.601536895972906)], [(140.85885065381353, 35.06090665815539, 24.080242688031074), (37.296990186942956, 94.94260157363908, 67.76040823941796), (63.95243309388285, 53.79365758902019, 82.25390931709696), (46.77828184735201, 131.0940958347027, 22.127622317945274), (84.11148384723532, 46.97393576496182, 68.91458038780284), (80.26002036380623, 98.07089343219315, 21.66908620400061), (86.38729044416391, 82.9649599800488, 30.647749575787287), (146.29379310712702, 31.285423343319486, 22.42078354955349), (94.0036331306224, 77.2473784131914, 28.748988456186186), (50.83572051998948, 63.14426113734044, 86.02001834267008), (57.95592517187965, 27.259787051977458, 114.78428777614286), (93.24312144399289, 75.41359731097866, 31.343281245028454)], [(69.02459665443376, 72.90708594050565, 58.068317405060576), (145.74590708053267, 23.433299713932044, 30.82079320553528), (48.51016653430789, 73.31429625082721, 78.1755372148649), (35.513555658370215, 74.68607953100255, 89.80036481062723), (132.9149651728244, 42.80217758632545, 24.28285724085016), (128.55415050563565, 21.92909519463087, 49.51675429973347), (136.36495747661738, 31.242334503392517, 32.392708019990096), (151.62516565446518, 26.078205282144168, 22.296629063390654), (150.61735410139602, 21.54706410328949, 27.83558179531448), (36.13283130105899, 111.94196130659661, 51.92520739234438), (89.2957197772167, 63.65684470733262, 47.04743551545067), (46.9495968525743, 44.56002532415844, 108.49037782326727)], [(123.7133027060062, 47.072989570055185, 29.213707723938615), (32.277871208756366, 82.15149024897192, 85.57063854227171), (107.36608490860972, 56.16880950058627, 36.465105590804), (107.50263253608685, 42.82041567111542, 49.67695179279773), (100.031826565664, 64.65884948284587, 35.30932395149012), (59.502018637772856, 61.48847313918155, 79.00950822304557), (136.35939408171316, 39.85203410810054, 23.788571810186298), (21.746811534976914, 132.32543349621469, 45.92775496880841), (61.34144024600825, 42.137039641641586, 96.52152011235016), (46.53280142115678, 67.22989637886823, 86.23730219997498), (113.67593757967163, 46.912426670189824, 39.41163575013855), (112.31048003247778, 46.130906517960234, 41.558613449561975)]]

robot = OT2Manager(
    hostname="172.26.192.201", 
    username="root",
    key_filename="secret/ot2_ssh_key_remote",  
    password=None,
    virtual_mode=False

    
)
robot.add_turn_on_lights_action()



for i, row in enumerate(rows):
    for col in range(12):
        for k, color_well in enumerate(range(7,10)):
            robot.add_add_color_action(
                color_slot = str(color_well),
                plate_well= f"{row}{col+1}", # 2nd row
                volume = color_space[i+2][col][k]
            )

robot.add_close_action()
robot.execute_actions_on_remote()
